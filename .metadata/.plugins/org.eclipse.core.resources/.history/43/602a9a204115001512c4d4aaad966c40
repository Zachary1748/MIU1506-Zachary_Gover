var listingData = {
	"Listing Objects":{
		"Vehicle Listings":[
			{
				"make": "GMC",
				"model": "Pickup/C2500",
				"year": "1971",
				"mileage": "180,000",
				"engine": "Chevy 350 Small Block/V8",
				"transmission": "4 Speed/Manual",
				"fuelMileage": "12-15mpg",
				"color": "Blue",
				"bedType": "long",
				"driveType": "2WD",
				"condition": "Used",
				"cab": "Single",
				"": "",
				"": "",
				"": "",
				"": "",
				"": "",
				"": "",

			},
			{
				"": "",
				"": ""
			}
		]
	}
};

var showDescription = function(dataSource){
	var descriptionWindow = Ti.UI.createWindow ({
		title: dataSource.title,
		backgroundColor: "fff"
	});
	var descriptionText = Ti.UI.createLabel ({
		text: dataSource.text,
		top: 30,
		left: 20,
		right: 20,
		color: "333",
		font: {fontSize: "16", fontFamily: "Arial"}
	});
	descriptionWindow.add(descriptionText);
	navWindow.openWindow(descriptionWindow);
};

var listingSections = [];
for (var n in listingData){
	// Custom Header
	var customHeader = Ti.UI.createView ({
		height: 40
	});
	var chText = Ti.UI.createLabel ({
		text: n,
		left: 10,
		font: {fontWeight: "bold"}
	});
	customHeader.add(chText);
	
	// Custom Footer
	var customFooter = Ti.UI.createView ({
		height: 30
	});
	var cfText = Ti.UI.createLabel ({
		text: "All listings provided by Zachary",
		left: 10,
		font: {fontSize: 13},
		color: 333
	});
	customFooter.add(cfText);
	
	// Create Section and rows
	var currentSection = Ti.UI.createTableViewSection ({
		headerView: customHeader,
		footerView: customFooter
	});
	for(var item in listingData[n]){
		for (var i = 0; i<listingData[n][item].length; i++){
			console.log(i);
			var currentRow = Ti.UI.createTableViewRow ({
				title: listingData[n][item][i].name,
				text: listingData[n][item][i].description,
				hasChild: true
			});
			currentSection.add(currentRow);
		}
	}
	listingSections.push(currentSection);
}
listings.setData(listingSections);
listings.addEventListener("click", function(event){
	showDescription(event.source);
});